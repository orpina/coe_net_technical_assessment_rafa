<div class="table-container">
    <table mat-table [dataSource]="tasksList()" class="table" matSort [matSortActive]="sortActive"
      [matSortDirection]="sortDirection" (matSortChange)="sortChange($event)">
      @for(col of columns; track $index){
        <ng-container [matColumnDef]="col.field">
          <th mat-header-cell *matHeaderCellDef mat-sort-header [style.width.px]="col.maxWidth"
            [style.textAlign]="col.align" [disabled]="col.sortDisabled"> {{ col.title }} </th>
          <td mat-cell *matCellDef="let element">
            <div class="td-container" [style.width.px]="col.maxWidth" [style.justifyContent]="col.align">
              <div [style.textAlign]="col.align" [style.maxWidth.px]="col.maxWidth"> 
                @switch(col.type){ 
                @case("options"){
                  <button mat-icon-button [matMenuTriggerFor]="optionsmenu">
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <mat-menu #optionsmenu="matMenu">
                    <div class="menu-container">
                      <button mat-menu-item>
                        <mat-icon>done</mat-icon>
                        <span>Complete</span>              
                      </button>
                    </div>
                  </mat-menu>
                }             
                @default{ {{ element | field:col.field }} } } </div>
            </div>
          </td>
        </ng-container>
      } 
      <tr mat-header-row *matHeaderRowDef="columnNames; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: columnNames;" class="rows"></tr>
    </table>
  </div>